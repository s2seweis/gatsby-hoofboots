{"version":3,"file":"component---src-pages-pferde-[id]-besonderheiten-tsx-c8ba594e3224c4f4588d.js","mappings":"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","sources":["webpack://hufschuhapp.frontend/./src/services/upload/factFileParticularities/parseFactFileParticularities.js","webpack://hufschuhapp.frontend/./src/components/App/FactFile/Particularities/FactFileParticularitiesForm.js","webpack://hufschuhapp.frontend/./src/components/App/FactFile/Particularities/FactFileParticularitiesData.tsx","webpack://hufschuhapp.frontend/./src/pages/pferde/[id]/besonderheiten.tsx","webpack://hufschuhapp.frontend/./src/components/App/Misc/Logo.js"],"sourcesContent":["import { findOption } from \"../../../components/App/Misc/strapiArrayToOptions\";\n\nconst fieldMapping = {\n  Equidenart: \"equineType\",\n  Rasse: \"race\",\n  Rasse_Andere: \"raceOthers\",\n  Reitweise: \"ridingStyle\",\n  Nutzungszeit: \"weeklyRidingTime\",\n  Beschlagen: \"hasHorseShoe\",\n  Vorerkrankungen: \"preconditions\",\n  Vorerkrankungen_Andere: \"preconditionsOther\",\n  Hufvorerkrankungen: \"hoofPreconditions\",\n  Hufvorerkrankungen_Andere: \"hoofPreconditionsOther\",\n  Stellungsanomalien: \"positionAnomalies\",\n  Stellungsanomalien_Andere: \"positionAnomaliesOther\",\n};\n\nexport function localToStrapi(state) {\n  // attributes that need to be changed\n  const {\n    Equidenart,\n    Reitweise,\n    Vorerkrankungen,\n    Nutzungszeit,\n    Rasse,\n    Hufvorerkrankungen,\n    Stellungsanomalien,\n    ...restState\n  } = state;\n\n  const convertedFields = {};\n  const toConvert = [\n    \"Equidenart\",\n    \"Reitweise\",\n    \"Vorerkrankungen\",\n    \"Nutzungszeit\",\n    \"Rasse\",\n    \"Hufvorerkrankungen\",\n    \"Stellungsanomalien\",\n  ];\n\n  toConvert.forEach((key) => {\n    convertedFields[key] = state[key].value;\n  });\n\n  return Object.assign(restState, convertedFields);\n}\n\nexport function strapiToLocal(state, cms) {\n  // attributes that need to be changed\n  const {\n    Equidenart,\n    Reitweise,\n    Vorerkrankungen,\n    Nutzungszeit,\n    Rasse,\n    Hufvorerkrankungen,\n    Stellungsanomalien,\n    ...restState\n  } = state;\n\n  const convertedFields = {};\n  const toConvert = [\n    \"Equidenart\",\n    \"Reitweise\",\n    \"Vorerkrankungen\",\n    \"Nutzungszeit\",\n    \"Rasse\",\n    \"Hufvorerkrankungen\",\n    \"Stellungsanomalien\",\n  ];\n\n  toConvert.forEach((key) => {\n    convertedFields[key] = findOption(\n      cms[key].Optionen.strapi_json_value,\n      state[fieldMapping[key]]\n    );\n  });\n\n  return Object.assign(restState, convertedFields);\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { FactFileForm } from \"../styled\";\nimport { InputGroup, TypedInput } from \"../TypedInput\";\nimport { Button } from \"../../Misc/Button\";\nimport {\n  localToStrapi,\n  strapiToLocal,\n} from \"../../../../services/upload/factFileParticularities/parseFactFileParticularities\";\nimport Logo from \"../../Misc/Logo\";\n\nexport const f2initial = {\n  Equidenart: \"\",\n  Rasse: \"\",\n  Rasse_Andere: \"\",\n  Reitweise: \"\",\n  Reitweise_Andere: \"\",\n  Nutzungszeit: \"\",\n  Beschlagen: false,\n  Vorerkrankungen: \"\",\n  Vorerkrankungen_Andere: \"\",\n  Hufvorerkrankungen: \"\",\n  Hufvorerkrankungen_Andere: \"\",\n  Stellungsanomalien: \"\",\n  Stellungsanomalien_Andere: \"\",\n};\n\nexport default function FactFileParticularitiesForm({\n  cms,\n  initialState,\n  saveFactFileParticularities,\n}) {\n  const [state, setState] = useState(initialState || f2initial);\n\n  const messagRef = useRef();\n  const [message, setMessage] = useState(\"\");\n  const fileInputRef = useRef();\n  const [fileInputChange] = useState(false);\n\n  // if data is sourced from strapi, need to parse some field, e.g. checkbox and selects\n  useEffect(() => {\n    // check if one field that should be a select value is a string,\n    // if yes all are sourced from strapi and not yet converted\n    if (typeof state.Equidenart === \"string\" && state.Equidenart) {\n      setState(strapiToLocal(state, cms));\n    }\n  }, []);\n\n  // read file\n  useEffect(() => {\n    if (fileInputRef.current?.files?.[0]) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        setState((prevState) => ({\n          ...prevState,\n          StellungsanomalienFotos: event.target.result,\n        }));\n      };\n      reader.readAsDataURL(fileInputRef.current.files[0]);\n    }\n  }, [fileInputChange]);\n\n  // saves form\n  function onSubmit(event) {\n    event.preventDefault();\n\n    let findEmptyField = false;\n\n    /* TODO: Redo validation */\n\n    // toggle flag to true if field is missing\n    Object.keys(state).forEach((key) => {\n      const item = state[key];\n      if (\n        item &&\n        ((typeof item === \"object\" && Object.keys(item).length === 0) ||\n          !item) &&\n        !key.endsWith(\"Andere\") &&\n        !key.endsWith(\"Fotos\") &&\n        key !== \"Rasse\" &&\n        key !== \"Beschlagen\"\n      ) {\n        findEmptyField = true;\n      }\n    });\n\n    // check if the additional fields need to be filled out\n    [\n      \"Rasse\",\n      \"Reitweise\",\n      \"Vorerkrankungen\",\n      \"Hufvorerkrankungen\",\n      \"Stellungsanomalien\",\n    ].forEach((p) => {\n      if (\n        !state[p] ||\n        (state[p].index === cms[p].Optionen.strapi_json_value.length - 1 &&\n          !state[p + \"_Andere\"])\n      ) {\n        if (\n          p === \"Rasse\" &&\n          state[\"Rasse\"] &&\n          (state[\"Equidenart\"] === \"Pferd\" || state[\"Equidenart\"] === \"Pony\")\n        ) {\n          findEmptyField = true;\n        } else if (p !== \"Rasse\") {\n          findEmptyField = true;\n        }\n      }\n    });\n\n    if (\n      (!state[\"Rasse\"] &&\n        (state[\"Equidenart\"] === \"Pferd\" || state[\"Equidenart\"] === \"Pony\")) ||\n      state[\"Rasse\"].index ===\n        cms[\"Rasse\"].Optionen.strapi_json_value.length - 1 ||\n      (state[\"Rasse\"].index ===\n        cms[\"Rasse\"].Optionen.strapi_json_value.length - 2 &&\n        !state[\"Rasse\" + \"_Andere\"])\n    ) {\n      findEmptyField = true;\n    }\n\n    if (findEmptyField) {\n      setMessage(cms.Meta.FelderFehlen);\n      messagRef.current.style.display = \"inline\";\n      return;\n    }\n\n    saveFactFileParticularities(localToStrapi(state));\n  }\n\n  return (\n    // Queries for the images used for image select inputs\n    // order is given by the query in the page.\n    // Alternatively, add order fields in strapi and sort here.\n    <FactFileForm onSubmit={onSubmit}>\n      <Logo />\n      {Object.keys(cms).map((key, index) => {\n        if (key === \"Meta\") return;\n        const field = cms[key];\n\n        /*\n          Fields that have special conditions etc.\n          */\n        let showHint;\n        let insertAfterInput;\n\n        /* RASSE */\n        if (key === \"Rasse\") {\n          // display only if pferde or pony is selected\n          if (\n            !(\n              state[\"Equidenart\"].value ===\n                cms[\"Equidenart\"].Optionen.strapi_json_value[0] ||\n              state[\"Equidenart\"].value ===\n                cms[\"Equidenart\"].Optionen.strapi_json_value[1]\n            )\n          ) {\n            return;\n          }\n          // if \"Andere\" or \"Rassenmix\" is selected, show another input field\n          if (\n            state[key] &&\n            (state[key].value ===\n              cms[\"Rasse\"].Optionen[cms[\"Rasse\"].Optionen.length - 1] ||\n              state[key].value ===\n                cms[\"Rasse\"].Optionen[cms[\"Rasse\"].Optionen.length - 2])\n          ) {\n            insertAfterInput = (\n              <>\n                <div className={\"insert-field\"}>\n                  <label htmlFor={key + \"additional-field\"}>\n                    {cms.Rasse.Titel_Mischung}\n                  </label>\n                  <TypedInput\n                    id={key + \"additional-field\"}\n                    state={state}\n                    setState={setState}\n                    name={\"Rasse_Andere\"}\n                    value={state[\"Rasse_Andere\"]}\n                    type={\"text\"}\n                  />\n                </div>\n              </>\n            );\n          }\n        }\n\n        /* REITWEISE */\n        if (key === \"Reitweise\") {\n          // if \"Andere\" is selected, show another input field\n          if (\n            state[\"Reitweise\"] &&\n            state[\"Reitweise\"].value ===\n              cms[\"Reitweise\"].Optionen[cms[\"Reitweise\"].Optionen.length - 1]\n          ) {\n            insertAfterInput = (\n              <div className={\"insert-field\"}>\n                <label htmlFor={key + \"additional-field\"}>\n                  {cms.Reitweise.Titel_Andere}\n                </label>\n                <TypedInput\n                  id={key + \"additional-field\"}\n                  state={state}\n                  setState={setState}\n                  name={\"Reitweise_Andere\"}\n                  value={state[\"Reitweise_Andere\"]}\n                  type={\"text\"}\n                />\n              </div>\n            );\n          }\n        }\n\n        /* VORERKRANKUNGEN */\n        // if \"Andere\" is selected, show another input field\n        const optionsV = cms[\"Vorerkrankungen\"].Optionen;\n        if (\n          key === \"Vorerkrankungen\" &&\n          state[\"Vorerkrankungen\"] &&\n          state[\"Vorerkrankungen\"].value === optionsV[optionsV.length - 1]\n        ) {\n          insertAfterInput = (\n            <div className={\"insert-field\"}>\n              <label htmlFor={key + \"additional-field\"}>\n                {cms.Vorerkrankungen.Titel_Andere}\n              </label>\n              <TypedInput\n                id={key + \"additional-field\"}\n                state={state}\n                setState={setState}\n                name={\"Vorerkrankungen_Andere\"}\n                value={state[\"Vorerkrankungen_Andere\"]}\n                type={\"textarea\"}\n              />\n            </div>\n          );\n        }\n\n        /* HUFVORERKRANKUNGEN */\n        // if \"Andere\" is selected, show another input field\n        const optionsHV = cms[\"Hufvorerkrankungen\"].Optionen;\n        if (\n          key === \"Hufvorerkrankungen\" &&\n          state[\"Hufvorerkrankungen\"] &&\n          state[\"Hufvorerkrankungen\"].value === optionsHV[optionsHV.length - 1]\n        ) {\n          insertAfterInput = (\n            <div className={\"insert-field\"}>\n              <label htmlFor={key + \"additional-field\"}>\n                {cms.Hufvorerkrankungen.Titel_Andere}\n              </label>\n              <TypedInput\n                id={key + \"additional-field\"}\n                state={state}\n                setState={setState}\n                name={\"Hufvorerkrankungen_Andere\"}\n                value={state[\"Hufvorerkrankungen_Andere\"]}\n                type={\"textarea\"}\n              />\n            </div>\n          );\n        }\n\n        /* STELLUNGSANOMALIEN */\n        const optionsSA = cms[\"Stellungsanomalien\"].Optionen;\n        if (\n          key === \"Stellungsanomalien\" &&\n          state[\"Stellungsanomalien\"] &&\n          state[\"Stellungsanomalien\"].value === optionsSA[optionsSA.length - 1]\n        ) {\n          insertAfterInput = (\n            <div className={\"insert-field\"}>\n              <label htmlFor={key + \"additional-field\"}>\n                {cms.Stellungsanomalien.Titel_Andere}\n              </label>\n              <TypedInput\n                id={key + \"additional-field\"}\n                state={state}\n                setState={setState}\n                name={\"Stellungsanomalien_Andere\"}\n                value={state[\"Stellungsanomalien_Andere\"]}\n                type={\"textarea\"}\n              />\n            </div>\n          );\n        }\n\n        /*\n          Automatic generation for default fields\n           */\n        return (\n          <InputGroup\n            title={field.Titel}\n            subtext={field.Subtext}\n            help={field.Hilfstext}\n            hint={field.Hinweis}\n            showHint={showHint}\n            key={\"input-group\" + index}\n          >\n            <TypedInput\n              state={state}\n              setState={setState}\n              name={key}\n              value={state[key]}\n              options={field.Optionen}\n              type={field.Typ?.toLowerCase() || \"select\"}\n              images={[\n                field.Bild1?.localFile,\n                field.Bild2?.localFile,\n                field.Bild3?.localFile,\n              ]}\n            />\n            {insertAfterInput}\n          </InputGroup>\n        );\n      })}\n\n      <div className={\"bottom-row\"}>\n        <span className={\"fill-out\"} ref={messagRef}>\n          {message}\n        </span>\n        <Button className={\"primary save-button\"}>{cms.Meta.Speichern}</Button>\n      </div>\n    </FactFileForm>\n  );\n}\n","import {\n  useHorseQuery,\n  useUpdateHorseMutation,\n} from \"../../../../redux/api/horseApi\";\nimport React, { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../../../redux/store\";\nimport routes from \"../../../../constants/routes\";\nimport { navigate } from \"gatsby\";\nimport FactFileParticularitiesForm, {\n  f2initial,\n} from \"./FactFileParticularitiesForm\";\nimport { Alert } from \"@mui/material\";\nimport { strapiToLocal } from \"../../../../services/upload/factFileParticularities/parseFactFileParticularities\";\n\ntype FactFileParticularitiesDataProps = {\n  cms: any;\n  horseId: string;\n};\n\nexport const FactFileParticularitiesData = ({\n  horseId,\n  cms,\n}: FactFileParticularitiesDataProps) => {\n  const user = useSelector((state: RootState) => state.auth.user);\n\n  const { data: horseData, isLoading } = useHorseQuery(\n    { userId: user?.id as string, horseId: horseId },\n    {\n      refetchOnMountOrArgChange: true,\n      skip: !horseId,\n    }\n  );\n\n  const [updateHorse, updateHorseResult] = useUpdateHorseMutation();\n\n  const saveFactFileParticularities = async (factFileParticularities: any) => {\n    const horsePatch = {\n      factFileParticularities: {\n        equineType: factFileParticularities.Equidenart,\n        race: factFileParticularities.Rasse,\n        raceOthers: factFileParticularities.Rasse_Andere,\n        ridingStyle: factFileParticularities.Reitweise,\n        weeklyRidingTime: factFileParticularities.Nutzungszeit,\n        hoofPreconditions: factFileParticularities.Hufvorerkrankungen,\n        hoofPreconditionsOther:\n          factFileParticularities.Hufvorerkrankungen_Andere,\n        positionAnomalies: factFileParticularities.Stellungsanomalien,\n        positionAnomaliesOther:\n          factFileParticularities.Stellungsanomalien_Andere,\n        preconditions: factFileParticularities.Vorerkrankungen,\n        preconditionsOther: factFileParticularities.Vorerkrankungen_Andere,\n      },\n    };\n\n    await updateHorse({\n      userId: user?.id,\n      horseId: horseId,\n      data: horsePatch,\n    });\n  };\n\n  useEffect(() => {\n    if (updateHorseResult.isSuccess) {\n      navigate(routes.detailView(horseId));\n    }\n  }, [updateHorseResult]);\n\n  if (isLoading || updateHorseResult.isLoading) {\n    return <span>Lädt..</span>;\n  }\n\n  if (updateHorseResult.error) {\n    return <Alert severity={\"error\"}>Fehler beim Speichern</Alert>;\n  }\n\n  return (\n    <FactFileParticularitiesForm\n      cms={cms}\n      saveFactFileParticularities={async (factFileParticularities: any) => {\n        await saveFactFileParticularities(factFileParticularities);\n      }}\n      horse={horseData}\n      initialState={\n        horseData.factFileParticularities\n          ? strapiToLocal(horseData.factFileParticularities, cms)\n          : // {\n            //   Equidenart: findOption(\n            //     cms.Equidenart.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.equineType\n            //   ),\n            //   Rasse: findOption(\n            //     cms.Rasse.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.race\n            //   ),\n            //   Rasse_Andere: horseData.factFileParticularities.raceOthers,\n            //   Reitweise: findOption(\n            //     cms.Reitweise.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.ridingStyle\n            //   ),\n            //   Nutzungszeit: findOption(\n            //     cms.Nutzungszeit.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.weeklyRidingTime\n            //   ),\n            //   Beschlagen: horseData.factFileParticularities.hasHorseShoe,\n            //   Vorerkrankungen: findOption(\n            //     cms.Vorerkrankungen.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.preconditions\n            //   ),\n            //   Vorerkrankungen_Andere:\n            //     horseData.factFileParticularities.preconditionsOther,\n            //   Hufvorerkrankungen: findOption(\n            //     cms.Hufvorerkrankungen.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.hoofPreconditions\n            //   ),\n            //   Hufvorerkrankungen_Andere:\n            //     horseData.factFileParticularities.hoofPreconditionsOther,\n            //   Stellungsanomalien: findOption(\n            //     cms.Stellungsanomalien.Optionen.strapi_json_value,\n            //     horseData.factFileParticularities.positionAnomalies\n            //   ),\n            //   Stellungsanomalien_Andere:\n            //     horseData.factFileParticularities.positionAnomaliesOther,\n            // }\n            f2initial\n      }\n    />\n  );\n};\n","import React from \"react\";\nimport { graphql } from \"gatsby\";\nimport AppLayout from \"../../../components/App/Layout\";\nimport { Particularities } from \"../../../components/App/FactFile/Particularities\";\nimport { General } from \"../../../components/App/FactFile/General\";\nimport routes from \"../../../constants/routes\";\nimport { FactFileParticularitiesData } from \"../../../components/App/FactFile/Particularities/FactFileParticularitiesData\";\nimport { classNames } from \"react-select/dist/declarations/src/utils\";\n\nexport default function FactFileParticularitiesPage(props: any) {\n  const { data, location, id: horseId } = props;\n\n  return (\n    <AppLayout\n      title={\"Besonderheiten\"}\n      subtitleKey={\"name\"}\n      horseId={horseId}\n      showNavigation={true}\n      lastRoute={routes.detailView(horseId)}\n      location={location}\n    >\n      <FactFileParticularitiesData\n        cms={data[\"strapiSteckbriefBesonderheiten\"]}\n        horseId={horseId}\n      />\n    </AppLayout>\n  );\n}\n\nexport const pageQuery = graphql`\n  query {\n    strapiSteckbriefBesonderheiten {\n      Meta {\n        Titel\n        Speichern\n        FelderFehlen\n      }\n      Equidenart {\n        Titel\n        Hilfstext\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Subtext\n      }\n      Rasse {\n        Titel\n        Hilfstext\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Titel_Mischung\n        Subtext\n      }\n      Reitweise {\n        Titel\n        Hilfstext\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Subtext\n        Titel_Andere\n      }\n      Nutzungszeit {\n        Titel\n        Hilfstext\n        Typ\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Subtext\n      }\n      Beschlagen {\n        Titel\n        Hilfstext\n        Typ\n      }\n      Vorerkrankungen {\n        Titel\n        Hilfstext\n        Subtext\n        Optionen {\n          id\n          strapi_json_value\n        }\n      }\n      Hufvorerkrankungen {\n        Titel\n        Hilfstext\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Titel_Andere\n        Subtext\n      }\n      Stellungsanomalien {\n        Subtext\n        Titel\n        Hilfstext\n        Optionen {\n          id\n          strapi_json_value\n        }\n        Titel_Andere\n        Hinweis\n      }\n    }\n  }\n`;\n","import React from \"react\";\nimport { StaticQuery, graphql } from \"gatsby\";\nimport styled from \"styled-components\";\nimport { GatsbyImage } from \"gatsby-plugin-image\";\n\nconst LogoWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n`;\n\nexport default function Logo() {\n  return (\n    <StaticQuery\n      query={graphql`\n        {\n          logoBig: file(relativePath: { eq: \"logoBig.png\" }) {\n            childImageSharp {\n              gatsbyImageData(width: 400, layout: CONSTRAINED)\n            }\n          }\n        }\n      `}\n      render={(data) => (\n        <LogoWrapper>\n          <GatsbyImage\n            image={data.logoBig.childImageSharp.gatsbyImageData}\n            alt={\"Equilandoo Logo\"}\n          />\n        </LogoWrapper>\n      )}\n    />\n  );\n}\n"],"names":["fieldMapping","Equidenart","Rasse","Rasse_Andere","Reitweise","Nutzungszeit","Beschlagen","Vorerkrankungen","Vorerkrankungen_Andere","Hufvorerkrankungen","Hufvorerkrankungen_Andere","Stellungsanomalien","Stellungsanomalien_Andere","strapiToLocal","state","cms","restState","convertedFields","forEach","key","findOption","Optionen","strapi_json_value","Object","assign","f2initial","Reitweise_Andere","FactFileParticularitiesForm","initialState","saveFactFileParticularities","useState","setState","messagRef","useRef","message","setMessage","fileInputRef","fileInputChange","useEffect","current","files","reader","FileReader","onload","event","prevState","StellungsanomalienFotos","target","result","readAsDataURL","onSubmit","preventDefault","findEmptyField","keys","item","length","endsWith","p","index","Meta","FelderFehlen","style","display","value","localToStrapi","Logo","map","insertAfterInput","field","className","htmlFor","Titel_Mischung","TypedInput","id","name","type","Titel_Andere","optionsV","optionsHV","optionsSA","title","Titel","subtext","Subtext","help","Hilfstext","hint","Hinweis","showHint","options","Typ","toLowerCase","images","Bild1","localFile","Bild2","Bild3","ref","Button","Speichern","FactFileParticularitiesData","horseId","user","useSelector","auth","useHorseQuery","userId","refetchOnMountOrArgChange","skip","horseData","data","isLoading","useUpdateHorseMutation","updateHorse","updateHorseResult","factFileParticularities","horsePatch","equineType","race","raceOthers","ridingStyle","weeklyRidingTime","hoofPreconditions","hoofPreconditionsOther","positionAnomalies","positionAnomaliesOther","preconditions","preconditionsOther","isSuccess","navigate","routes","React","error","Alert","severity","horse","FactFileParticularitiesPage","props","location","AppLayout","subtitleKey","showNavigation","lastRoute","LogoWrapper","styled","StaticQuery","query","render","G","image","logoBig","childImageSharp","gatsbyImageData","alt"],"sourceRoot":""}