"use strict";(self.webpackChunkhufschuhapp_frontend=self.webpackChunkhufschuhapp_frontend||[]).push([[229],{2400:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(7294),r=t(5131),i=t(6936),l=t(5861),s=t(4687),u=t.n(s),o=t(1001),d=t(2256),c=t(1082),f=t(4517),g=t(4051),m=t(2830),k=t(3366),v=t(757),p=["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"],h=["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"],E={Equidenart:"equineType",Rasse:"race",Rasse_Andere:"raceOthers",Reitweise:"ridingStyle",Nutzungszeit:"weeklyRidingTime",Beschlagen:"hasHorseShoe",Vorerkrankungen:"preconditions",Vorerkrankungen_Andere:"preconditionsOther",Hufvorerkrankungen:"hoofPreconditions",Hufvorerkrankungen_Andere:"hoofPreconditionsOther",Stellungsanomalien:"positionAnomalies",Stellungsanomalien_Andere:"positionAnomaliesOther"};function R(e,n){e.Equidenart,e.Reitweise,e.Vorerkrankungen,e.Nutzungszeit,e.Rasse,e.Hufvorerkrankungen,e.Stellungsanomalien;var t=(0,k.Z)(e,h),a={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(t){a[t]=(0,v.t)(n[t].Optionen.strapi_json_value,e[E[t]])})),Object.assign(t,a)}var _=t(8846),S={Equidenart:"",Rasse:"",Rasse_Andere:"",Reitweise:"",Reitweise_Andere:"",Nutzungszeit:"",Beschlagen:!1,Vorerkrankungen:"",Vorerkrankungen_Andere:"",Hufvorerkrankungen:"",Hufvorerkrankungen_Andere:"",Stellungsanomalien:"",Stellungsanomalien_Andere:""};function w(e){var n=e.cms,t=e.initialState,r=e.saveFactFileParticularities,i=(0,a.useState)(t||S),l=i[0],s=i[1],u=(0,a.useRef)(),o=(0,a.useState)(""),d=o[0],c=o[1],v=(0,a.useRef)(),h=(0,a.useState)(!1)[0];return(0,a.useEffect)((function(){"string"==typeof l.Equidenart&&l.Equidenart&&s(R(l,n))}),[]),(0,a.useEffect)((function(){var e,n;if(null!==(e=v.current)&&void 0!==e&&null!==(n=e.files)&&void 0!==n&&n[0]){var t=new FileReader;t.onload=function(e){s((function(n){return Object.assign({},n,{StellungsanomalienFotos:e.target.result})}))},t.readAsDataURL(v.current.files[0])}}),[h]),a.createElement(f.K,{onSubmit:function(e){e.preventDefault();var t=!1;if(Object.keys(l).forEach((function(e){var n=l[e];!n||("object"!=typeof n||0!==Object.keys(n).length)&&n||e.endsWith("Andere")||e.endsWith("Fotos")||"Rasse"===e||"Beschlagen"===e||(t=!0)})),["Rasse","Reitweise","Vorerkrankungen","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(e){l[e]&&(l[e].index!==n[e].Optionen.strapi_json_value.length-1||l[e+"_Andere"])||("Rasse"!==e||!l.Rasse||"Pferd"!==l.Equidenart&&"Pony"!==l.Equidenart?"Rasse"!==e&&(t=!0):t=!0)})),(l.Rasse||"Pferd"!==l.Equidenart&&"Pony"!==l.Equidenart)&&l.Rasse.index!==n.Rasse.Optionen.strapi_json_value.length-1&&(l.Rasse.index!==n.Rasse.Optionen.strapi_json_value.length-2||l.Rasse_Andere)||(t=!0),t)return c(n.Meta.FelderFehlen),void(u.current.style.display="inline");r(function(e){e.Equidenart,e.Reitweise,e.Vorerkrankungen,e.Nutzungszeit,e.Rasse,e.Hufvorerkrankungen,e.Stellungsanomalien;var n=(0,k.Z)(e,p),t={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(n){t[n]=e[n].value})),Object.assign(n,t)}(l))}},a.createElement(_.Z,null),Object.keys(n).map((function(e,t){var r,i,u,o;if("Meta"!==e){var d,c=n[e];if("Rasse"===e){if(l.Equidenart.value!==n.Equidenart.Optionen.strapi_json_value[0]&&l.Equidenart.value!==n.Equidenart.Optionen.strapi_json_value[1])return;!l[e]||l[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-1]&&l[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-2]||(d=a.createElement(a.Fragment,null,a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Rasse.Titel_Mischung),a.createElement(g.X,{id:e+"additional-field",state:l,setState:s,name:"Rasse_Andere",value:l.Rasse_Andere,type:"text"}))))}"Reitweise"===e&&l.Reitweise&&l.Reitweise.value===n.Reitweise.Optionen[n.Reitweise.Optionen.length-1]&&(d=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Reitweise.Titel_Andere),a.createElement(g.X,{id:e+"additional-field",state:l,setState:s,name:"Reitweise_Andere",value:l.Reitweise_Andere,type:"text"})));var f=n.Vorerkrankungen.Optionen;"Vorerkrankungen"===e&&l.Vorerkrankungen&&l.Vorerkrankungen.value===f[f.length-1]&&(d=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Vorerkrankungen.Titel_Andere),a.createElement(g.X,{id:e+"additional-field",state:l,setState:s,name:"Vorerkrankungen_Andere",value:l.Vorerkrankungen_Andere,type:"textarea"})));var m=n.Hufvorerkrankungen.Optionen;"Hufvorerkrankungen"===e&&l.Hufvorerkrankungen&&l.Hufvorerkrankungen.value===m[m.length-1]&&(d=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Hufvorerkrankungen.Titel_Andere),a.createElement(g.X,{id:e+"additional-field",state:l,setState:s,name:"Hufvorerkrankungen_Andere",value:l.Hufvorerkrankungen_Andere,type:"textarea"})));var k=n.Stellungsanomalien.Optionen;return"Stellungsanomalien"===e&&l.Stellungsanomalien&&l.Stellungsanomalien.value===k[k.length-1]&&(d=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Stellungsanomalien.Titel_Andere),a.createElement(g.X,{id:e+"additional-field",state:l,setState:s,name:"Stellungsanomalien_Andere",value:l.Stellungsanomalien_Andere,type:"textarea"}))),a.createElement(g.B,{title:c.Titel,subtext:c.Subtext,help:c.Hilfstext,hint:c.Hinweis,showHint:undefined,key:"input-group"+t},a.createElement(g.X,{state:l,setState:s,name:e,value:l[e],options:c.Optionen,type:(null===(r=c.Typ)||void 0===r?void 0:r.toLowerCase())||"select",images:[null===(i=c.Bild1)||void 0===i?void 0:i.localFile,null===(u=c.Bild2)||void 0===u?void 0:u.localFile,null===(o=c.Bild3)||void 0===o?void 0:o.localFile]}),d)}})),a.createElement("div",{className:"bottom-row"},a.createElement("span",{className:"fill-out",ref:u},d),a.createElement(m.z,{className:"primary save-button"},n.Meta.Speichern)))}var A=t(4543),y=function(e){var n=e.horseId,t=e.cms,r=(0,d.v9)((function(e){return e.auth.user})),s=(0,o.wD)({userId:null==r?void 0:r.id,horseId:n},{refetchOnMountOrArgChange:!0,skip:!n}),f=s.data,g=s.isLoading,m=(0,o.IE)(),k=m[0],v=m[1],p=function(){var e=(0,l.Z)(u().mark((function e(t){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={factFileParticularities:{equineType:t.Equidenart,race:t.Rasse,raceOthers:t.Rasse_Andere,ridingStyle:t.Reitweise,weeklyRidingTime:t.Nutzungszeit,hoofPreconditions:t.Hufvorerkrankungen,hoofPreconditionsOther:t.Hufvorerkrankungen_Andere,positionAnomalies:t.Stellungsanomalien,positionAnomaliesOther:t.Stellungsanomalien_Andere,preconditions:t.Vorerkrankungen,preconditionsOther:t.Vorerkrankungen_Andere}},e.next=3,k({userId:null==r?void 0:r.id,horseId:n,data:a});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){v.isSuccess&&(0,c.navigate)(i.Z.detailView(n))}),[v]),g||v.isLoading?a.createElement("span",null,"LÃ¤dt.."):v.error?a.createElement(A.Z,{severity:"error"},"Fehler beim Speichern"):a.createElement(w,{cms:t,saveFactFileParticularities:function(){var e=(0,l.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),horse:f,initialState:f.factFileParticularities?R(f.factFileParticularities,t):S})};function O(e){var n=e.data,t=e.location,l=e.id;return a.createElement(r.Z,{title:"Besonderheiten",subtitleKey:"name",horseId:l,showNavigation:!0,lastRoute:i.Z.detailView(l),location:t},a.createElement(y,{cms:n.strapiSteckbriefBesonderheiten,horseId:l}))}},8846:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(7294),r=t(1082),i=t(9692),l=t(3723),s=i.default.div.withConfig({displayName:"Logo__LogoWrapper",componentId:"sc-1oogppf-0"})(["width:100%;display:flex;justify-content:center;"]);function u(){return a.createElement(r.StaticQuery,{query:"114436975",render:function(e){return a.createElement(s,null,a.createElement(l.G,{image:e.logoBig.childImageSharp.gatsbyImageData,alt:"Equilandoo Logo"}))}})}}}]);
//# sourceMappingURL=component---src-pages-pferde-[id]-besonderheiten-tsx-c8ba594e3224c4f4588d.js.map