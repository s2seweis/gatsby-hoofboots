"use strict";(self.webpackChunkhufschuhapp_frontend=self.webpackChunkhufschuhapp_frontend||[]).push([[229],{2400:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var a=t(7294),i=t(2917),r=t(6936),l=t(1001),s=t(743),o=t(574),u=t(4517),d=t(4051),c=t(2830),g=t(757);const f={Equidenart:"equineType",Rasse:"race",Rasse_Andere:"raceOthers",Reitweise:"ridingStyle",Nutzungszeit:"weeklyRidingTime",Beschlagen:"hasHorseShoe",Vorerkrankungen:"preconditions",Vorerkrankungen_Andere:"preconditionsOther",Hufvorerkrankungen:"hoofPreconditions",Hufvorerkrankungen_Andere:"hoofPreconditionsOther",Stellungsanomalien:"positionAnomalies",Stellungsanomalien_Andere:"positionAnomaliesOther"};function m(e,n){const{Equidenart:t,Reitweise:a,Vorerkrankungen:i,Nutzungszeit:r,Rasse:l,Hufvorerkrankungen:s,Stellungsanomalien:o,...u}=e,d={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((t=>{d[t]=(0,g.t)(n[t].Optionen.strapi_json_value,e[f[t]])})),Object.assign(u,d)}var k=t(8846);const v={Equidenart:"",Rasse:"",Rasse_Andere:"",Reitweise:"",Reitweise_Andere:"",Nutzungszeit:"",Beschlagen:!1,Vorerkrankungen:"",Vorerkrankungen_Andere:"",Hufvorerkrankungen:"",Hufvorerkrankungen_Andere:"",Stellungsanomalien:"",Stellungsanomalien_Andere:""};function h(e){let{cms:n,initialState:t,saveFactFileParticularities:i}=e;const{0:r,1:l}=(0,a.useState)(t||v),s=(0,a.useRef)(),{0:o,1:g}=(0,a.useState)(""),f=(0,a.useRef)(),{0:h}=(0,a.useState)(!1);return(0,a.useEffect)((()=>{"string"==typeof r.Equidenart&&r.Equidenart&&l(m(r,n))}),[]),(0,a.useEffect)((()=>{var e,n;if(null!==(e=f.current)&&void 0!==e&&null!==(n=e.files)&&void 0!==n&&n[0]){const e=new FileReader;e.onload=e=>{l((n=>({...n,StellungsanomalienFotos:e.target.result})))},e.readAsDataURL(f.current.files[0])}}),[h]),a.createElement(u.K,{onSubmit:function(e){e.preventDefault();let t=!1;if(Object.keys(r).forEach((e=>{const n=r[e];!n||("object"!=typeof n||0!==Object.keys(n).length)&&n||e.endsWith("Andere")||e.endsWith("Fotos")||"Rasse"===e||"Beschlagen"===e||(t=!0)})),["Rasse","Reitweise","Vorerkrankungen","Hufvorerkrankungen","Stellungsanomalien"].forEach((e=>{r[e]&&(r[e].index!==n[e].Optionen.strapi_json_value.length-1||r[e+"_Andere"])||("Rasse"!==e||!r.Rasse||"Pferd"!==r.Equidenart&&"Pony"!==r.Equidenart?"Rasse"!==e&&(t=!0):t=!0)})),(r.Rasse||"Pferd"!==r.Equidenart&&"Pony"!==r.Equidenart)&&r.Rasse.index!==n.Rasse.Optionen.strapi_json_value.length-1&&(r.Rasse.index!==n.Rasse.Optionen.strapi_json_value.length-2||r.Rasse_Andere)||(t=!0),t)return g(n.Meta.FelderFehlen),void(s.current.style.display="inline");i(function(e){const{Equidenart:n,Reitweise:t,Vorerkrankungen:a,Nutzungszeit:i,Rasse:r,Hufvorerkrankungen:l,Stellungsanomalien:s,...o}=e,u={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((n=>{u[n]=e[n].value})),Object.assign(o,u)}(r))}},a.createElement(k.Z,null),Object.keys(n).map(((e,t)=>{var i,s,o,u;if("Meta"===e)return;const c=n[e];let g;if("Rasse"===e){var f,m,k,v;if((null===(f=r.Equidenart)||void 0===f?void 0:f.value)!==(null===(m=n.Equidenart)||void 0===m?void 0:m.Optionen.strapi_json_value[0])&&(null===(k=r.Equidenart)||void 0===k?void 0:k.value)!==(null===(v=n.Equidenart)||void 0===v?void 0:v.Optionen.strapi_json_value[1]))return;!r[e]||r[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-1]&&r[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-2]||(g=a.createElement(a.Fragment,null,a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Rasse.Titel_Mischung),a.createElement(d.X,{id:e+"additional-field",state:r,setState:l,name:"Rasse_Andere",value:r.Rasse_Andere,type:"text"}))))}"Reitweise"===e&&r.Reitweise&&r.Reitweise.value===n.Reitweise.Optionen[n.Reitweise.Optionen.length-1]&&(g=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Reitweise.Titel_Andere),a.createElement(d.X,{id:e+"additional-field",state:r,setState:l,name:"Reitweise_Andere",value:r.Reitweise_Andere,type:"text"})));const h=n.Vorerkrankungen.Optionen;"Vorerkrankungen"===e&&r.Vorerkrankungen&&r.Vorerkrankungen.value===h[h.length-1]&&(g=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Vorerkrankungen.Titel_Andere),a.createElement(d.X,{id:e+"additional-field",state:r,setState:l,name:"Vorerkrankungen_Andere",value:r.Vorerkrankungen_Andere,type:"textarea"})));const p=n.Hufvorerkrankungen.Optionen;"Hufvorerkrankungen"===e&&r.Hufvorerkrankungen&&r.Hufvorerkrankungen.value===p[p.length-1]&&(g=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Hufvorerkrankungen.Titel_Andere),a.createElement(d.X,{id:e+"additional-field",state:r,setState:l,name:"Hufvorerkrankungen_Andere",value:r.Hufvorerkrankungen_Andere,type:"textarea"})));const E=n.Stellungsanomalien.Optionen;return"Stellungsanomalien"===e&&r.Stellungsanomalien&&r.Stellungsanomalien.value===E[E.length-1]&&(g=a.createElement("div",{className:"insert-field"},a.createElement("label",{htmlFor:e+"additional-field"},n.Stellungsanomalien.Titel_Andere),a.createElement(d.X,{id:e+"additional-field",state:r,setState:l,name:"Stellungsanomalien_Andere",value:r.Stellungsanomalien_Andere,type:"textarea"}))),a.createElement(d.B,{title:c.Titel,subtext:c.Subtext,help:c.Hilfstext,hint:c.Hinweis,showHint:undefined,key:"input-group"+t},a.createElement(d.X,{state:r,setState:l,name:e,value:r[e],options:c.Optionen,type:(null===(i=c.Typ)||void 0===i?void 0:i.toLowerCase())||"select",images:[null===(s=c.Bild1)||void 0===s?void 0:s.localFile,null===(o=c.Bild2)||void 0===o?void 0:o.localFile,null===(u=c.Bild3)||void 0===u?void 0:u.localFile]}),g)})),a.createElement("div",{className:"bottom-row"},a.createElement("span",{className:"fill-out",ref:s},o),a.createElement(c.z,{className:"primary save-button"},n.Meta.Speichern)))}var p=t(3984);const E=e=>{let{horseId:n,cms:t}=e;const i=(0,s.v9)((e=>e.auth.user)),{data:u,isLoading:d}=(0,l.wD)({userId:null==i?void 0:i.id,horseId:n},{refetchOnMountOrArgChange:!0,skip:!n}),[c,g]=(0,l.IE)();return(0,a.useEffect)((()=>{g.isSuccess&&(0,o.navigate)(r.Z.detailView(n))}),[g]),d||g.isLoading?a.createElement("span",null,"LÃ¤dt.."):g.error?a.createElement(p.Z,{severity:"error"},"Fehler beim Speichern"):a.createElement(h,{cms:t,saveFactFileParticularities:async e=>{await(async e=>{const t={factFileParticularities:{equineType:e.Equidenart,race:e.Rasse,raceOthers:e.Rasse_Andere,ridingStyle:e.Reitweise,weeklyRidingTime:e.Nutzungszeit,hoofPreconditions:e.Hufvorerkrankungen,hoofPreconditionsOther:e.Hufvorerkrankungen_Andere,positionAnomalies:e.Stellungsanomalien,positionAnomaliesOther:e.Stellungsanomalien_Andere,preconditions:e.Vorerkrankungen,preconditionsOther:e.Vorerkrankungen_Andere}};await c({userId:null==i?void 0:i.id,horseId:n,data:t})})(e)},horse:u,initialState:u.factFileParticularities?m(u.factFileParticularities,t):v})};function R(e){const{data:n,location:t,id:l}=e;return a.createElement(i.Z,{title:"Besonderheiten",subtitleKey:"name",horseId:l,showNavigation:!0,lastRoute:r.Z.detailView(l),location:t},a.createElement(E,{cms:n.strapiSteckbriefBesonderheiten,horseId:l}))}},8846:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(7294),i=t(574),r=t(8117),l=t(3723);const s=r.default.div.withConfig({displayName:"Logo__LogoWrapper",componentId:"sc-1oogppf-0"})(["width:100%;display:flex;justify-content:center;"]);function o(){return a.createElement(i.StaticQuery,{query:"114436975",render:e=>a.createElement(s,null,a.createElement(l.G,{image:e.logoBig.childImageSharp.gatsbyImageData,alt:"Equilandoo Logo"}))})}}}]);
//# sourceMappingURL=component---src-pages-pferde-[id]-besonderheiten-tsx-08e98a36cb50244f0805.js.map