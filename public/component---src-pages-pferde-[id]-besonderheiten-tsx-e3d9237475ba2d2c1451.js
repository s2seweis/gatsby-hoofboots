"use strict";(self.webpackChunkhufschuhapp_frontend=self.webpackChunkhufschuhapp_frontend||[]).push([[229],{8681:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var r=t(7294),a=t(5131),i=t(6936),l=t(5861),s=t(4687),o=t.n(s),u=t(1001),d=t(2256),c=t(1082),g=t(4517),f=t(925),m=t(2830),k=(t(4554),t(7069),t(4297),t(2425),t(6633),t(3366)),v=t(757),h=["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"],p=["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"],E={Equidenart:"equineType",Rasse:"race",Rasse_Andere:"raceOthers",Reitweise:"ridingStyle",Nutzungszeit:"weeklyRidingTime",Beschlagen:"hasHorseShoe",Vorerkrankungen:"preconditions",Vorerkrankungen_Andere:"preconditionsOther",Hufvorerkrankungen:"hoofPreconditions",Hufvorerkrankungen_Andere:"hoofPreconditionsOther",Stellungsanomalien:"positionAnomalies",Stellungsanomalien_Andere:"positionAnomaliesOther"};function R(e,n){e.Equidenart,e.Reitweise,e.Vorerkrankungen,e.Nutzungszeit,e.Rasse,e.Hufvorerkrankungen,e.Stellungsanomalien;var t=(0,k.Z)(e,p),r={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(t){r[t]=(0,v.t)(n[t].Optionen.strapi_json_value,e[E[t]])})),Object.assign(t,r)}var S=t(8846),_={Equidenart:"",Rasse:"",Rasse_Andere:"",Reitweise:"",Reitweise_Andere:"",Nutzungszeit:"",Beschlagen:!1,Vorerkrankungen:"",Vorerkrankungen_Andere:"",Hufvorerkrankungen:"",Hufvorerkrankungen_Andere:"",Stellungsanomalien:"",Stellungsanomalien_Andere:""};function w(e){var n=e.cms,t=(e.horse,e.initialState),a=e.saveFactFileParticularities,i=(0,r.useState)(t||_),l=i[0],s=i[1],o=(0,r.useRef)(),u=(0,r.useState)(""),d=u[0],c=u[1],v=(0,r.useRef)(),p=(0,r.useState)(!1),E=p[0];p[1];return console.log(l,n),(0,r.useEffect)((function(){console.log(l),"string"==typeof l.Equidenart&&l.Equidenart&&(console.log("need to parse"),s(R(l,n))),console.log(l)}),[]),(0,r.useEffect)((function(){var e,n;if(null!==(e=v.current)&&void 0!==e&&null!==(n=e.files)&&void 0!==n&&n[0]){var t=new FileReader;t.onload=function(e){s((function(n){return Object.assign({},n,{StellungsanomalienFotos:e.target.result})}))},t.readAsDataURL(v.current.files[0])}}),[E]),r.createElement(g.K,{onSubmit:function(e){e.preventDefault();var t=!1;if(console.log(l),Object.keys(l).forEach((function(e){var n=l[e];!n||("object"!=typeof n||0!==Object.keys(n).length)&&n||e.endsWith("Andere")||e.endsWith("Fotos")||"Rasse"===e||"Beschlagen"===e||(console.log("0 missing"),t=!0)})),["Rasse","Reitweise","Vorerkrankungen","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(e){l[e]&&(l[e].index!==n[e].Optionen.length-1||l[e+"_Andere"])||(console.log("1 missing"),t=!0)})),l.Rasse&&l.Rasse.index!==n.Rasse.Optionen.length-1&&(l.Rasse.index!==n.Rasse.Optionen.length-2||l.Rasse_Andere)||(console.log("Rasse missing"),t=!0),t)return c(n.Meta.FelderFehlen),void(o.current.style.display="inline");a(function(e){e.Equidenart,e.Reitweise,e.Vorerkrankungen,e.Nutzungszeit,e.Rasse,e.Hufvorerkrankungen,e.Stellungsanomalien;var n=(0,k.Z)(e,h),t={};return["Equidenart","Reitweise","Vorerkrankungen","Nutzungszeit","Rasse","Hufvorerkrankungen","Stellungsanomalien"].forEach((function(n){t[n]=e[n].value})),Object.assign(n,t)}(l))}},r.createElement(S.Z,null),Object.keys(n).map((function(e,t){var a,i,o,u;if("Meta"!==e){var d,c=n[e];if("Rasse"===e){if(l.Equidenart.value!==n.Equidenart.Optionen.strapi_json_value[0]&&l.Equidenart.value!==n.Equidenart.Optionen.strapi_json_value[1])return;!l[e]||l[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-1]&&l[e].value!==n.Rasse.Optionen[n.Rasse.Optionen.length-2]||(d=r.createElement(r.Fragment,null,r.createElement("div",{className:"insert-field"},r.createElement("label",{htmlFor:e+"additional-field"},n.Rasse.Titel_Mischung),r.createElement(f.X,{id:e+"additional-field",state:l,setState:s,name:"Rasse_Andere",value:l.Rasse_Andere,type:"text"}))))}"Reitweise"===e&&l.Reitweise&&l.Reitweise.value===n.Reitweise.Optionen[n.Reitweise.Optionen.length-1]&&(d=r.createElement("div",{className:"insert-field"},r.createElement("label",{htmlFor:e+"additional-field"},n.Reitweise.Titel_Andere),r.createElement(f.X,{id:e+"additional-field",state:l,setState:s,name:"Reitweise_Andere",value:l.Reitweise_Andere,type:"text"})));var g=n.Vorerkrankungen.Optionen;"Vorerkrankungen"===e&&l.Vorerkrankungen&&l.Vorerkrankungen.value===g[g.length-1]&&(d=r.createElement("div",{className:"insert-field"},r.createElement("label",{htmlFor:e+"additional-field"},n.Vorerkrankungen.Titel_Andere),r.createElement(f.X,{id:e+"additional-field",state:l,setState:s,name:"Vorerkrankungen_Andere",value:l.Vorerkrankungen_Andere,type:"textarea"})));var m=n.Hufvorerkrankungen.Optionen;"Hufvorerkrankungen"===e&&l.Hufvorerkrankungen&&l.Hufvorerkrankungen.value===m[m.length-1]&&(d=r.createElement("div",{className:"insert-field"},r.createElement("label",{htmlFor:e+"additional-field"},n.Hufvorerkrankungen.Titel_Andere),r.createElement(f.X,{id:e+"additional-field",state:l,setState:s,name:"Hufvorerkrankungen_Andere",value:l.Hufvorerkrankungen_Andere,type:"textarea"})));var k=n.Stellungsanomalien.Optionen;return"Stellungsanomalien"===e&&l.Stellungsanomalien&&l.Stellungsanomalien.value===k[k.length-1]&&(d=r.createElement("div",{className:"insert-field"},r.createElement("label",{htmlFor:e+"additional-field"},n.Stellungsanomalien.Titel_Andere),r.createElement(f.X,{id:e+"additional-field",state:l,setState:s,name:"Stellungsanomalien_Andere",value:l.Stellungsanomalien_Andere,type:"textarea"}))),r.createElement(f.B,{title:c.Titel,subtext:c.Subtext,help:c.Hilfstext,hint:c.Hinweis,showHint:undefined,key:"input-group"+t},r.createElement(f.X,{state:l,setState:s,name:e,value:l[e],options:c.Optionen,type:(null===(a=c.Typ)||void 0===a?void 0:a.toLowerCase())||"select",images:[null===(i=c.Bild1)||void 0===i?void 0:i.localFile,null===(o=c.Bild2)||void 0===o?void 0:o.localFile,null===(u=c.Bild3)||void 0===u?void 0:u.localFile]}),d)}})),r.createElement("div",{className:"bottom-row"},r.createElement("span",{className:"fill-out",ref:o},d),r.createElement(m.z,{className:"primary save-button"},n.Meta.Speichern)))}var A=t(9241),y=function(e){var n=e.horseId,t=e.cms,a=(0,d.v9)((function(e){return e.auth.user})),s=(0,u.wD)({userId:null==a?void 0:a.id,horseId:n},{refetchOnMountOrArgChange:!0,skip:!n}),g=s.data,f=s.isLoading,m=(0,u.IE)(),k=m[0],v=m[1],h=function(){var e=(0,l.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={factFileParticularities:{equineType:t.Equidenart,race:t.Rasse,raceOthers:t.Rasse_Andere,ridingStyle:t.Reitweise,weeklyRidingTime:t.Nutzungszeit,hoofPreconditions:t.Hufvorerkrankungen,hoofPreconditionsOther:t.Hufvorerkrankungen_Andere,positionAnomalies:t.Stellungsanomalien,positionAnomaliesOther:t.Stellungsanomalien_Andere,preconditions:t.Vorerkrankungen,preconditionsOther:t.Vorerkrankungen_Andere}},e.next=3,k({userId:null==a?void 0:a.id,horseId:n,data:r});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){v.isSuccess&&(0,c.navigate)(i.Z.detailView(n))}),[v]),f||v.isLoading?r.createElement("span",null,"LÃ¤dt.."):v.error?r.createElement(A.Z,{severity:"error"},"Fehler beim Speichern"):r.createElement(w,{cms:t,saveFactFileParticularities:function(){var e=(0,l.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),horse:g,initialState:g.factFileParticularities?R(g.factFileParticularities,t):_})};function O(e){var n=e.data,t=e.location,l=e.id;return r.createElement(a.Z,{title:"Besonderheiten",subtitleKey:"name",horseId:l,showNavigation:!0,lastRoute:i.Z.detailView(l),location:t},r.createElement(y,{cms:n.strapiSteckbriefBesonderheiten,horseId:l}))}},8846:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(7294),a=t(1082),i=t(9692),l=t(3723),s=i.default.div.withConfig({displayName:"Logo__LogoWrapper",componentId:"sc-181hvhl-0"})(["width:100%;display:flex;justify-content:center;"]);function o(){return r.createElement(a.StaticQuery,{query:"114436975",render:function(e){return r.createElement(s,null,r.createElement(l.G,{image:e.logoBig.childImageSharp.gatsbyImageData,alt:"Equilandoo Logo"}))}})}}}]);
//# sourceMappingURL=component---src-pages-pferde-[id]-besonderheiten-tsx-e3d9237475ba2d2c1451.js.map