"use strict";(self.webpackChunkhufschuhapp_frontend=self.webpackChunkhufschuhapp_frontend||[]).push([[262],{8670:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(8498),i=n.n(r),a=n(4297),o=n(7294);const s=()=>o.createElement("div",{style:{margin:"auto auto"}},o.createElement(i(),{color:a.Z.primary[170],loading:!0,size:30}))},1716:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(7294),i=n(2917),a=n(574),o=n(6936),s=n(5977),l=n(3310),c=n(2830);const u=e=>{let{fill:t,stroke:n,strokeLinecap:i,strokeLinejoin:a,strokeWidth:o,height:s,width:l}=e;const c={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:l||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},c),r.createElement("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),r.createElement("circle",{cx:"12",cy:"13",r:"4"}))},d=e=>{let{fill:t,stroke:n,strokeLinecap:i,strokeLinejoin:a,strokeWidth:o,height:s,width:l}=e;const c={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:l||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},c),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),r.createElement("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),r.createElement("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),r.createElement("line",{x1:"12",y1:"22",x2:"12",y2:"18"}))},h=e=>{let{fill:t,stroke:n,strokeLinecap:i,strokeLinejoin:a,strokeWidth:o,height:s,width:l}=e;const c={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:l||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},c),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))};var m=n(4297),g=n(102),p=n(9161),f=n(3175);const v=n(8117).default.div.withConfig({displayName:"ImageExtended__Modal",componentId:"sc-up875y-0"})(["position:fixed;top:0;left:0;height:100vh;width:100vw;justify-content:center;align-items:center;display:",";z-index:4;.large-image{position:absolute;display:",";width:90%;height:auto;z-index:4;}.blur{position:absolute;width:100vw;height:100vh;background-color:hsla(0,0%,0%,80%);}"],(e=>e.open?"flex":"none"),(e=>e.open?"flex":"none"));function y(e){let{src:t,alt:n,onShortClick:i}=e;const{0:a,1:o}=(0,r.useState)(!1),s=(0,r.useRef)(),l=(0,r.useRef)(),{0:c,1:u}=(0,r.useState)(!1),{0:d,1:h}=(0,r.useState)(!1),{0:m,1:g}=(0,r.useState)(!1);function p(e){e.preventDefault(),h(!0)}function f(e){i(),c||(e.preventDefault(),u(!0),window.setTimeout((()=>{g(!0)}),700))}function y(e){var t;if(null===(t=l.current)||void 0===t||!t.contains(e.target)){if(o(!1),!a)return;h(!1),u(!1),g(!1)}}return(0,r.useEffect)((()=>(s.current.addEventListener("touchstart",f),s.current.addEventListener("touchend",p),window.addEventListener("touchstart",y),()=>{try{s.current.removeEventListener("touchstart",f),s.current.removeEventListener("touchend",p),window.removeEventListener("touchstart",y)}catch(e){}}))),(0,r.useEffect)((()=>{c&&(d?(h(!1),u(!1),g(!1)):o(!0))}),[m]),r.createElement(r.Fragment,null,r.createElement("img",{src:t,alt:n||"",ref:s}),r.createElement(v,{open:a},r.createElement("img",{src:t,alt:n||"",className:"large-image",ref:l}),r.createElement("div",{className:"blur"})))}const w=["fetlock","hoofWidth","hoofLength"],E=["legFR","legFL","legHR","legHL"];function k(e){var t,n,i,v;let{pos:k,target:x,images:b,cms:_,completed:I,reset:j,horse:O,saveImage:F}=e;const{0:L,1:S}=(0,r.useState)({selectedImageIndex:void 0});return r.createElement(s.N,null,r.createElement("section",{className:"thumbnails"},r.createElement("div",{className:"icon"},r.createElement(d,{height:32,width:32,stroke:m.Z.red.primary})),r.createElement("div",{className:"content"},r.createElement("p",{className:"hint"},_.Hinweis[(0,l.rr)(k)]),r.createElement(f.C,{image:0===k?"":null===(t=_.Thumbnails[(0,l.rr)(k)])||void 0===t||null===(n=t.localFile.childImageSharp)||void 0===n?void 0:n.gatsbyImageData}),r.createElement(f.C,{image:null===(i=_.Thumbnails[(0,l.iH)(x)])||void 0===i||null===(v=i.localFile.childImageSharp)||void 0===v?void 0:v.gatsbyImageData,width:64,height:64}))),r.createElement("section",{className:"instructions"},r.createElement("div",{className:"icon"},r.createElement(h,{height:32,width:32,stroke:m.Z.yellow.primary})),r.createElement("div",{className:"content"},r.createElement("p",null,_.Photo_Guide_Texte.Starte_Aufnahme))),r.createElement("section",{className:"image-preview"},r.createElement("div",{className:"icon"},r.createElement(u,{height:32,width:32,stroke:m.Z.green.primary})),r.createElement("div",{className:"content"},1===(null==b?void 0:b.length)&&r.createElement("div",{className:"single-image-container"},r.createElement(y,{alt:"",src:b[0]})),3===(null==b?void 0:b.length)&&r.createElement(r.Fragment,null,r.createElement(g.Z,{images:b.map(((e,t)=>r.createElement(y,{src:null==b?void 0:b[t],alt:"Aufgenommenes Bild",onShortClick:()=>{(0,p._9)({setState:S,newState:t+1,property:"selectedImageIndex"})}}))),options:[1,2,3],value:L.selectedImageIndex,onChange:e=>{(0,p._9)({setState:S,newState:e,property:"selectedImageIndex"})}}),r.createElement(c.z,{style:{display:I?"none":"flex"},onClick:()=>{console.log(L,L.selectedImageIndex),F(L.selectedImageIndex)},className:"primary"},_.Photo_Guide_Texte.Speichern)),(0===(null==b?void 0:b.length)||!b)&&r.createElement("div",{className:"placeholder"},r.createElement("p",null,_.Photo_Guide_Texte.Keine_Bilder),r.createElement(c.z,{className:"primary",onClick:()=>{DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{(0,a.navigate)(o.Z.camera({id:O.id,pos:k,target:x})),console.log(e)})).catch((e=>console.err(e))):(0,a.navigate)(o.Z.camera({id:O.id,pos:k,target:x}))}},_.Photo_Guide_Texte.Aufnahme_Starten)),r.createElement("div",{className:"button-row"},r.createElement("div",{className:"button-row-button"},r.createElement(c.z,{className:"secondary",onClick:j,style:{display:I?"flex":"none"}},_.Photo_Guide_Texte.Zuruecksetzen),r.createElement(c.z,{className:"primary",onClick:async function(){x.startsWith("leg")?w.indexOf(k)<w.length-1?await(0,a.navigate)(o.Z.photoGuide({id:O.id,target:x,pos:w[w.indexOf(k)+1]})):E.indexOf(x)<E.length-1?await(0,a.navigate)(o.Z.photoGuide({id:O.id,target:E[E.indexOf(x)+1],pos:w[0]})):await(0,a.navigate)(o.Z.detailView(O.id)):await(0,a.navigate)(o.Z.detailView(O.id))},style:{display:I?"flex":"none"}},"Weiter"))))))}var x=n(743),b=n(1001),_=n(8670),I=n(3808),j=n(3984),O=n(2436);const F=e=>{var t,n,i;let{cms:a,horseId:o,pos:s,target:l}=e;console.log("START");const c=(0,x.v9)((e=>e.auth.user)),u=(0,x.v9)((e=>e.appState)),d=(0,x.I0)(),{enqueueSnackbar:h}=(0,O.Ds)(),{data:m,isLoading:g,isError:p}=(0,b.wD)({userId:null==c?void 0:c.id,horseId:o},{refetchOnMountOrArgChange:!0,skip:!o||!(null!=c&&c.id)}),f=b.sP.endpoints.horse.useQuerySubscription({userId:null==c?void 0:c.id,horseId:o}).refetch,v=l&&void 0!==typeof s&&"torso"===l?null==m||null===(t=m.images)||void 0===t?void 0:t.torso:null==m||null===(n=m.images)||void 0===n||null===(i=n[l])||void 0===i?void 0:i[s],[y,w]=(0,b.IE)(),[E,F]=(0,b.a)();return(0,r.useEffect)((()=>{if(F.isSuccess&&void 0!==typeof s&&l){const e=null==F?void 0:F.data.url;y({userId:null==c?void 0:c.id,horseId:o,data:"torso"===l?{images:{torso:e}}:{images:{[l]:{[s]:e}}}}),d((0,I.ve)({selectedHorse:{temporaryImages:[]}}))}}),[F]),g||F.isLoading||w.isLoading?r.createElement(_.T,null):p?r.createElement(j.Z,{severity:"error"},"Daten konnten nicht geladen werden."):w.isError?r.createElement(j.Z,{severity:"error"},"Das Bild konnte nicht zugeordnet werden."):F.isError?r.createElement(j.Z,{severity:"error"},"Das Bild konnte nicht gespeichert werden."):r.createElement(k,{pos:s,target:l,images:v?[v]:u.selectedHorse.temporaryImages,cms:a,completed:!!v,reset:()=>{y({userId:null==c?void 0:c.id,horseId:o,data:{images:{[l]:"torso"===l?null:{[s]:null}}}})},horse:m,saveImage:e=>{if(!e)return void h("Bitte wähle eines der drei Bilder aus",{variant:"error"});const t=u.selectedHorse.temporaryImages[e-1];E({userId:null==c?void 0:c.id,horseId:o,data:{image:t}}),f()}})};function L(e){const{data:t,location:n,id:s}=e;if("undefined"==typeof window)return;const l=new Proxy(new URLSearchParams(n.search),{get:(e,t)=>e.get(t)}),{target:c,pos:u}=l;return void 0!==typeof u&&c||(0,a.navigate)(o.Z.detailView(s)),r.createElement(i.Z,{showNavigation:!0,title:"Foto aufnehmen",subtitleKey:"name",horseId:s,location:n,lastRoute:o.Z.detailView(s)},r.createElement(F,{cms:t.strapiKamera,horseId:s,pos:u,target:c}))}},5937:function(e,t,n){n.d(t,{M:function(){return c}});var r=n(7294);const i=e=>{let{fill:t,stroke:n,strokeLinecap:i,strokeLinejoin:a,strokeWidth:o,height:s,width:l}=e;const c={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:l||24,height:s||24};return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:c},r.createElement("polyline",{points:"9 11 12 14 22 4"}),r.createElement("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}))};var a=n(4297),o=n(8117),s=n(3989);const l=o.default.div.withConfig({displayName:"Checkmark__Styles",componentId:"sc-1bw7y0i-0"})(["background-color:white;border-radius:",";height:24px;"],s.Z.small);function c(e){let{completed:t}=e;return r.createElement(l,null,r.createElement(i,{stroke:t?a.Z.lightGreen[80]:a.Z.greys[500],strokeWidth:t?"2px":"1px"}))}},3175:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(7294),i=n(3723),a=n(8117),o=n(5937);const s=a.default.div.withConfig({displayName:"ImageWithSkeleton__Overlay",componentId:"sc-1bpcma3-0"})(["position:absolute;display:",";justify-content:center;align-items:center;height:64px;width:64px;z-index:2;background-color:hsla(0,0%,30%,70%);border-radius:10px;font-size:64px;color:lightgreen;"],(e=>e.completed?"flex":"none")),l=a.default.div.withConfig({displayName:"ImageWithSkeleton__ImageCheckmark",componentId:"sc-1bpcma3-1"})(["display:",";position:absolute;margin:-20px 0 0 48px;font-size:1.2rem;"],(e=>e.show?"flex":"none"));function c(e){let{image:t,height:n,width:a,className:c,showCheckmark:u,checked:d}=e;return t?r.createElement(r.Fragment,null,r.createElement(s,{completed:d},"✓"),r.createElement(i.G,{image:t,className:c,alt:"Thumbnail"}),r.createElement(l,{show:u},r.createElement(o.M,{completed:d}))):r.createElement("div",{style:{height:n,width:a}})}},3310:function(e,t,n){function r(e){switch(e){case"legFR":return"Bein_VR";case"legFL":return"Bein_VL";case"legHR":return"Bein_HR";case"legHL":return"Bein_HL";case"torso":return"Koerper"}}function i(e){switch(e){case"torso":return"Koerper";case"fetlock":return"Fessel";case"hoofWidth":return"Hufbreite";case"hoofLength":return"Huflaenge"}}function a(e){switch(e){case"legFR":return"vorderen rechten";case"legFL":return"vorderen linken";case"legHR":return"hinteren rechten";case"legHL":return"hinteren linken"}}n.d(t,{ZQ:function(){return a},iH:function(){return r},rr:function(){return i}})},8498:function(e,t,n){var r,i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var c,u,d=l(n(7294)),h=n(917),m=n(1776),g=h.keyframes(c||(c=i(["\n  50% {transform: scale(0.75);opacity: 0.2}\n  100% {transform: scale(1);opacity: 1}\n"],["\n  50% {transform: scale(0.75);opacity: 0.2}\n  100% {transform: scale(1);opacity: 1}\n"]))),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.style=function(e){var n=t.props,r=n.color,a=n.size,o=n.margin,s=n.speedMultiplier;return h.css(u||(u=i(["\n      display: inline-block;\n      background-color: ",";\n      width: ",";\n      height: ",";\n      margin: ",";\n      border-radius: 100%;\n      animation: "," ","s ","\n        infinite linear;\n      animation-fill-mode: both;\n    "],["\n      display: inline-block;\n      background-color: ",";\n      width: ",";\n      height: ",";\n      margin: ",";\n      border-radius: 100%;\n      animation: "," ","s ","\n        infinite linear;\n      animation-fill-mode: both;\n    "])),r,m.cssValue(a),m.cssValue(a),m.cssValue(o),g,.7/s,e%2?"0s":.35/s+"s")},t}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.css;return t?h.jsx("span",{css:[n]},h.jsx("span",{css:this.style(1)}),h.jsx("span",{css:this.style(2)}),h.jsx("span",{css:this.style(3)})):null},t.defaultProps=m.sizeMarginDefaults(15),t}(d.PureComponent);t.default=p},4333:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRgba=void 0,function(e){e.maroon="#800000",e.red="#FF0000",e.orange="#FFA500",e.yellow="#FFFF00",e.olive="#808000",e.green="#008000",e.purple="#800080",e.fuchsia="#FF00FF",e.lime="#00FF00",e.teal="#008080",e.aqua="#00FFFF",e.blue="#0000FF",e.navy="#000080",e.black="#000000",e.gray="#808080",e.silver="#C0C0C0",e.white="#FFFFFF"}(n||(n={}));t.calculateRgba=function(e,t){if(Object.keys(n).includes(e)&&(e=n[e]),"#"===e[0]&&(e=e.slice(1)),3===e.length){var r="";e.split("").forEach((function(e){r+=e,r+=e})),e=r}return"rgba("+(e.match(/.{2}/g)||[]).map((function(e){return parseInt(e,16)})).join(", ")+", "+t+")"}},1776:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9710),t),i(n(4333),t),i(n(6657),t)},9710:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.heightWidthRadiusDefaults=t.heightWidthDefaults=t.sizeMarginDefaults=t.sizeDefaults=void 0;var n={loading:!0,color:"#000000",css:"",speedMultiplier:1};function r(e){return Object.assign({},n,{size:e})}function i(e,t){return Object.assign({},n,{height:e,width:t})}t.sizeDefaults=r,t.sizeMarginDefaults=function(e){return Object.assign({},r(e),{margin:2})},t.heightWidthDefaults=i,t.heightWidthRadiusDefaults=function(e,t,n){return void 0===n&&(n=2),Object.assign({},i(e,t),{radius:n,margin:2})}},6657:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var n={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function r(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var i=(e.match(/[^0-9]*$/)||"").toString();return n[i]?{value:t,unit:i}:(console.warn("React Spinners: "+e+" is not a valid css value. Defaulting to "+t+"px."),{value:t,unit:"px"})}t.parseLengthAndUnit=r,t.cssValue=function(e){var t=r(e);return""+t.value+t.unit}}}]);
//# sourceMappingURL=component---src-pages-pferde-[id]-photo-guide-tsx-5b63cef40001c7e74942.js.map