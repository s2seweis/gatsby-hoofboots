"use strict";(self.webpackChunkhufschuhapp_frontend=self.webpackChunkhufschuhapp_frontend||[]).push([[262],{6126:function(e,t,n){var r,i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var c,u,d=l(n(7294)),h=n(3431),m=n(9890),f=h.keyframes(c||(c=i(["\n  50% {transform: scale(0.75);opacity: 0.2}\n  100% {transform: scale(1);opacity: 1}\n"],["\n  50% {transform: scale(0.75);opacity: 0.2}\n  100% {transform: scale(1);opacity: 1}\n"]))),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.style=function(e){var n=t.props,r=n.color,a=n.size,o=n.margin,s=n.speedMultiplier;return h.css(u||(u=i(["\n      display: inline-block;\n      background-color: ",";\n      width: ",";\n      height: ",";\n      margin: ",";\n      border-radius: 100%;\n      animation: "," ","s ","\n        infinite linear;\n      animation-fill-mode: both;\n    "],["\n      display: inline-block;\n      background-color: ",";\n      width: ",";\n      height: ",";\n      margin: ",";\n      border-radius: 100%;\n      animation: "," ","s ","\n        infinite linear;\n      animation-fill-mode: both;\n    "])),r,m.cssValue(a),m.cssValue(a),m.cssValue(o),f,.7/s,e%2?"0s":.35/s+"s")},t}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.css;return t?h.jsx("span",{css:[n]},h.jsx("span",{css:this.style(1)}),h.jsx("span",{css:this.style(2)}),h.jsx("span",{css:this.style(3)})):null},t.defaultProps=m.sizeMarginDefaults(15),t}(d.PureComponent);t.default=g},1007:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRgba=void 0,function(e){e.maroon="#800000",e.red="#FF0000",e.orange="#FFA500",e.yellow="#FFFF00",e.olive="#808000",e.green="#008000",e.purple="#800080",e.fuchsia="#FF00FF",e.lime="#00FF00",e.teal="#008080",e.aqua="#00FFFF",e.blue="#0000FF",e.navy="#000080",e.black="#000000",e.gray="#808080",e.silver="#C0C0C0",e.white="#FFFFFF"}(n||(n={}));t.calculateRgba=function(e,t){if(Object.keys(n).includes(e)&&(e=n[e]),"#"===e[0]&&(e=e.slice(1)),3===e.length){var r="";e.split("").forEach((function(e){r+=e,r+=e})),e=r}return"rgba("+(e.match(/.{2}/g)||[]).map((function(e){return parseInt(e,16)})).join(", ")+", "+t+")"}},9890:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(313),t),i(n(1007),t),i(n(384),t)},313:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.heightWidthRadiusDefaults=t.heightWidthDefaults=t.sizeMarginDefaults=t.sizeDefaults=void 0;var n={loading:!0,color:"#000000",css:"",speedMultiplier:1};function r(e){return Object.assign({},n,{size:e})}function i(e,t){return Object.assign({},n,{height:e,width:t})}t.sizeDefaults=r,t.sizeMarginDefaults=function(e){return Object.assign({},r(e),{margin:2})},t.heightWidthDefaults=i,t.heightWidthRadiusDefaults=function(e,t,n){return void 0===n&&(n=2),Object.assign({},i(e,t),{radius:n,margin:2})}},384:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var n={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function r(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var i=(e.match(/[^0-9]*$/)||"").toString();return n[i]?{value:t,unit:i}:(console.warn("React Spinners: "+e+" is not a valid css value. Defaulting to "+t+"px."),{value:t,unit:"px"})}t.parseLengthAndUnit=r,t.cssValue=function(e){var t=r(e);return""+t.value+t.unit}},8670:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(6126),i=n.n(r),a=n(4297),o=n(7294),s=function(){return o.createElement("div",{style:{margin:"auto auto"}},o.createElement(i(),{color:a.Z.primary[170],loading:!0,size:30}))}},1716:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(7294),i=n(5131),a=n(1082),o=n(6936),s=n(5861),l=n(4687),c=n.n(l),u=n(5977),d=n(3310),h=n(2830),m=function(e){var t=e.fill,n=e.stroke,i=e.strokeLinecap,a=e.strokeLinejoin,o=e.strokeWidth,s=e.height,l={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:e.width||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l),r.createElement("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),r.createElement("circle",{cx:"12",cy:"13",r:"4"}))},f=function(e){var t=e.fill,n=e.stroke,i=e.strokeLinecap,a=e.strokeLinejoin,o=e.strokeWidth,s=e.height,l={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:e.width||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),r.createElement("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),r.createElement("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),r.createElement("line",{x1:"12",y1:"22",x2:"12",y2:"18"}))},g=function(e){var t=e.fill,n=e.stroke,i=e.strokeLinecap,a=e.strokeLinejoin,o=e.strokeWidth,s=e.height,l={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:e.width||24,height:s||24};return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))},p=n(4297),v=n(102),y=n(9161),w=n(3175),x=n(9692).default.div.withConfig({displayName:"ImageExtended__Modal",componentId:"sc-up875y-0"})(["position:fixed;top:0;left:0;height:100vh;width:100vw;justify-content:center;align-items:center;display:",";z-index:4;.large-image{position:absolute;display:",";width:90%;height:auto;z-index:4;}.blur{position:absolute;width:100vw;height:100vh;background-color:hsla(0,0%,0%,80%);}"],(function(e){return e.open?"flex":"none"}),(function(e){return e.open?"flex":"none"}));function E(e){var t=e.src,n=e.alt,i=e.onShortClick,a=(0,r.useState)(!1),o=a[0],s=a[1],l=(0,r.useRef)(),c=(0,r.useRef)(),u=(0,r.useState)(!1),d=u[0],h=u[1],m=(0,r.useState)(!1),f=m[0],g=m[1],p=(0,r.useState)(!1),v=p[0],y=p[1];function w(e){e.preventDefault(),g(!0)}function E(e){i(),d||(e.preventDefault(),h(!0),window.setTimeout((function(){y(!0)}),700))}function k(e){var t;if(null===(t=c.current)||void 0===t||!t.contains(e.target)){if(s(!1),!o)return;g(!1),h(!1),y(!1)}}return(0,r.useEffect)((function(){return l.current.addEventListener("touchstart",E),l.current.addEventListener("touchend",w),window.addEventListener("touchstart",k),function(){try{l.current.removeEventListener("touchstart",E),l.current.removeEventListener("touchend",w),window.removeEventListener("touchstart",k)}catch(e){}}})),(0,r.useEffect)((function(){d&&(f?(g(!1),h(!1),y(!1)):s(!0))}),[v]),r.createElement(r.Fragment,null,r.createElement("img",{src:t,alt:n||"",ref:l}),r.createElement(x,{open:o},r.createElement("img",{src:t,alt:n||"",className:"large-image",ref:c}),r.createElement("div",{className:"blur"})))}var k=["fetlock","hoofWidth","hoofLength"],b=["legFR","legFL","legHR","legHL"];function _(e){var t,n,i,l,x=e.pos,_=e.target,I=e.images,O=e.cms,j=e.completed,F=e.reset,L=e.horse,N=e.saveImage;console.log("dudie",I);var S=(0,r.useState)({selectedImageIndex:void 0}),P=S[0],C=S[1];function D(){return(D=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("NEXT"),console.log(_),!_.startsWith("leg")){e.next=15;break}if(console.log("a",k.indexOf(x),k.length),!(k.indexOf(x)<k.length-1)){e.next=10;break}return console.log("n",k[k.indexOf(x)+1]),e.next=8,(0,a.navigate)(o.Z.photoGuide({id:L.id,target:_,pos:k[k.indexOf(x)+1]}));case 8:e.next=13;break;case 10:if(!(b.indexOf(_)<b.length-1)){e.next=13;break}return e.next=13,(0,a.navigate)(o.Z.photoGuide({id:L.id,target:b[b.indexOf(_)+1],pos:k[0]}));case 13:e.next=17;break;case 15:return e.next=17,(0,a.navigate)(o.Z.detailView(L.id));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.createElement(u.N,null,r.createElement("section",{className:"thumbnails"},r.createElement("div",{className:"icon"},r.createElement(f,{height:32,width:32,stroke:p.Z.red.primary})),r.createElement("div",{className:"content"},r.createElement("p",{className:"hint"},O.Hinweis[(0,d.rr)(x)]),r.createElement(w.C,{image:0===x?"":null===(t=O.Thumbnails[(0,d.rr)(x)])||void 0===t||null===(n=t.localFile.childImageSharp)||void 0===n?void 0:n.gatsbyImageData}),r.createElement(w.C,{image:null===(i=O.Thumbnails[(0,d.iH)(_)])||void 0===i||null===(l=i.localFile.childImageSharp)||void 0===l?void 0:l.gatsbyImageData,width:64,height:64}))),r.createElement("section",{className:"instructions"},r.createElement("div",{className:"icon"},r.createElement(g,{height:32,width:32,stroke:p.Z.yellow.primary})),r.createElement("div",{className:"content"},r.createElement("p",null,O.Photo_Guide_Texte.Starte_Aufnahme))),r.createElement("section",{className:"image-preview"},r.createElement("div",{className:"icon"},r.createElement(m,{height:32,width:32,stroke:p.Z.green.primary})),r.createElement("div",{className:"content"},1===I.length&&r.createElement("div",{className:"single-image-container"},r.createElement(E,{alt:"",src:I[0]})),3===(null==I?void 0:I.length)&&r.createElement(r.Fragment,null,r.createElement(v.Z,{images:I.map((function(e,t){return r.createElement(E,{src:null==I?void 0:I[t],alt:"Aufgenommenes Bild",onShortClick:function(){(0,y._9)({setState:C,newState:t+1,property:"selectedImageIndex"})}})})),options:[1,2,3],value:P.selectedImageIndex,onChange:function(e){(0,y._9)({setState:C,newState:e,property:"selectedImageIndex"})}}),r.createElement(h.z,{style:{display:j?"none":"flex"},onClick:function(){console.log(P,P.selectedImageIndex),N(P.selectedImageIndex)},className:"primary"},O.Photo_Guide_Texte.Speichern)),0===(null==I?void 0:I.length)&&r.createElement("div",{className:"placeholder"},r.createElement("p",null,O.Photo_Guide_Texte.Keine_Bilder),r.createElement(h.z,{className:"primary",onClick:function(){DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){(0,a.navigate)(o.Z.camera({id:L.id,pos:x,target:_})),console.log(e)})).catch((function(e){return console.err(e)})):(0,a.navigate)(o.Z.camera({id:L.id,pos:x,target:_}))}},O.Photo_Guide_Texte.Aufnahme_Starten)),r.createElement("div",{className:"button-row"},r.createElement("div",{className:"button-row-button"},r.createElement(h.z,{className:"secondary",onClick:F,style:{display:j?"flex":"none"}},O.Photo_Guide_Texte.Zuruecksetzen),r.createElement(h.z,{className:"primary",onClick:function(){return D.apply(this,arguments)},style:{display:j?"flex":"none"}},"Weiter"))))))}var I=n(2256),O=n(1001),j=n(8670),F=n(3808),L=n(9241),N=function(e){var t,n,i,a=e.cms,o=e.horseId,s=e.pos,l=e.target;console.log("START");var c=(0,I.v9)((function(e){return e.auth.user})),u=(0,I.v9)((function(e){return e.appState})),d=(0,I.I0)(),h=(0,O.wD)({userId:null==c?void 0:c.id,horseId:o},{refetchOnMountOrArgChange:!0,skip:!o||!(null!=c&&c.id)}),m=h.data,f=h.isLoading,g=h.isError,p=O.sP.endpoints.horse.useQuerySubscription({userId:null==c?void 0:c.id,horseId:o}).refetch,v=l&&void 0!==typeof s&&"torso"===l?null==m||null===(t=m.images)||void 0===t?void 0:t.torso:null==m||null===(n=m.images)||void 0===n||null===(i=n[l])||void 0===i?void 0:i[s];console.log(l,s,null==m?void 0:m.images,v);var y=(0,O.IE)(),w=y[0],x=y[1],E=(0,O.a)(),k=E[0],b=E[1];return(0,r.useEffect)((function(){if(b.isSuccess&&void 0!==typeof s&&l){var e,t,n=null==b?void 0:b.data.url;w({userId:null==c?void 0:c.id,horseId:o,data:"torso"===l?{images:{torso:n}}:{images:(t={},t[l]=(e={},e[s]=n,e),t)}}),d((0,F.ve)({selectedHorse:{temporaryImages:[]}}))}}),[b]),f||b.isLoading||x.isLoading?r.createElement(j.T,null):g?r.createElement(L.Z,{severity:"error"},"Daten konnten nicht geladen werden."):x.isError?r.createElement(L.Z,{severity:"error"},"Das Bild konnte nicht zugeordnet werden."):b.isError?r.createElement(L.Z,{severity:"error"},"Das Bild konnte nicht gespeichert werden."):r.createElement(_,{pos:s,target:l,images:v?[v]:u.selectedHorse.temporaryImages,cms:a,completed:!!v,reset:function(){var e,t;w({userId:null==c?void 0:c.id,horseId:o,data:{images:(t={},t[l]=(e={},e[s]=null,e),t)}})},horse:m,saveImage:function(e){var t=u.selectedHorse.temporaryImages[e-1];k({userId:null==c?void 0:c.id,horseId:o,data:{image:t}}),p()}})};function S(e){var t=e.data,n=e.location,s=e.id,l=new Proxy(new URLSearchParams(n.search),{get:function(e,t){return e.get(t)}}),c=l.target,u=l.pos;return void 0!==typeof u&&c||(0,a.navigate)(o.Z.detailView(s)),r.createElement(i.Z,{showNavigation:!0,title:"Foto aufnehmen",subtitleKey:"name",horseId:s,location:n,lastRoute:o.Z.detailView(s)},r.createElement(N,{cms:t.strapiKamera,horseId:s,pos:u,target:c}))}},5937:function(e,t,n){n.d(t,{M:function(){return c}});var r=n(7294),i=function(e){var t=e.fill,n=e.stroke,i=e.strokeLinecap,a=e.strokeLinejoin,o=e.strokeWidth,s=e.height,l={fill:t||"none",stroke:n||"#000",strokeLinecap:i||"round",strokeLinejoin:a||"round",strokeWidth:o||"1px",width:e.width||24,height:s||24};return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:l},r.createElement("polyline",{points:"9 11 12 14 22 4"}),r.createElement("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}))},a=n(4297),o=n(9692),s=n(3989),l=o.default.div.withConfig({displayName:"Checkmark__Styles",componentId:"sc-8z0cmn-0"})(["background-color:white;border-radius:",";height:24px;"],s.Z.small);function c(e){var t=e.completed;return r.createElement(l,null,r.createElement(i,{stroke:t?a.Z.lightGreen[80]:a.Z.greys[500],strokeWidth:t?"2px":"1px"}))}},3175:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(7294),i=n(3723),a=n(9692),o=n(5937),s=a.default.div.withConfig({displayName:"ImageWithSkeleton__Overlay",componentId:"sc-1bpcma3-0"})(["position:absolute;display:",";justify-content:center;align-items:center;height:64px;width:64px;z-index:2;background-color:hsla(0,0%,30%,70%);border-radius:10px;font-size:64px;color:lightgreen;"],(function(e){return e.completed?"flex":"none"})),l=a.default.div.withConfig({displayName:"ImageWithSkeleton__ImageCheckmark",componentId:"sc-1bpcma3-1"})(["display:",";position:absolute;margin:-20px 0 0 48px;font-size:1.2rem;"],(function(e){return e.show?"flex":"none"}));function c(e){var t=e.image,n=e.height,a=e.width,c=e.className,u=e.showCheckmark,d=e.checked;return t?r.createElement(r.Fragment,null,r.createElement(s,{completed:d},"✓"),r.createElement(i.G,{image:t,className:c,alt:"Thumbnail"}),r.createElement(l,{show:u},r.createElement(o.M,{completed:d}))):r.createElement("div",{style:{height:n,width:a}})}},3310:function(e,t,n){function r(e){switch(e){case"legFR":return"Bein_VR";case"legFL":return"Bein_VL";case"legHR":return"Bein_HR";case"legHL":return"Bein_HL";case"torso":return"Koerper"}}function i(e){switch(e){case"torso":return"Koerper";case"fetlock":return"Fessel";case"hoofWidth":return"Hufbreite";case"hoofLength":return"Huflaenge"}}function a(e){switch(e){case"legFR":return"vorderen rechten";case"legFL":return"vorderen linken";case"legHR":return"hinteren rechten";case"legHL":return"hinteren linken"}}n.d(t,{ZQ:function(){return a},iH:function(){return r},rr:function(){return i}})}}]);
//# sourceMappingURL=component---src-pages-pferde-[id]-photo-guide-tsx-ad0a5ac94ccbbd1c5d79.js.map